<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>上传简历</title>
    <style>
        body {position: fixed}
        .function-box input, img, textarea, button {position: fixed;}

        /* 设置标题框样式 */
        .h1-box {
            position: fixed;                   /* 固定定位，相对于浏览器窗口 */
            width: calc(394 / 1920 * 100vw);   /* 标题框宽度占比 */
            height: calc(110 / 1080 * 100vh);  /* 标题框高度占比 */
            left: calc(102 / 1920 *100vw);     /* 标题框距离 */
            top: calc(124 / 1080 * 100vh);     /* 标题框上边缘与浏览器上边缘对齐 */
            background-color: #ffffff;       /* 设置背景颜色 */
            margin: 0;                         /* 去除标题默认外边距 */
            border: none;                      /* 去除默认边框 */
        }
        /* 设置标题样式 */
        .h1-box h1 {
            font: Inter;                                                       /* 字体 */
            font-weight: 400;                                                  /* 字体粗细 */
            font-style: regular;                                               /* 字体样式 */
            font-size: min(calc(40 / 1920 * 100vw), calc(40 / 1080 * 100vh));  /* 字体大小 */
            line-height: calc(55 / 1080 * 100vh);                              /* 行高 */
            letter-spacing: 0%;                                                /* 字母间距 */
            vertical-align: middle;                                            /* 垂直对齐 */
            text-transform: Title case;                                        /* 首字母大写 */
            color: #000000;                                                  /* 字体颜色 */
        }

        /* 文本框样式 */
        .text-box {
            position: fixed;
            width: calc(696 / 1920 * 100vw);
            height: calc(70 / 1080 * 100vh);
            top: calc(254 / 1080 * 100vh);
            left: calc(102 / 1920 * 100vw);
        }
        /* 设置文本框内字体样式 */
        .text-box p {
            font: Inter;
            font-weight: 400;
            font-style: Regular;
            font-size: min(calc(20 / 1920 * 100vw), calc(20 / 1080 * 100vh));
            line-height: calc(35 / 1080 * 100vh);
            letter-spacing: 0%;
            vertical-align: Middle;
            color: #A5A5A5;
        }

        /* 图片样式 */
        .image {
            position: fixed;
            width: calc(763 / 1920 * 100vw);   /* 图片宽度占比 */
            height: calc(569 / 1080 * 100vh);  /* 图片高度占比 */
            top: calc(511 / 1080 * 100vh);     /* 图片上边缘与浏览器上边缘对齐 */
            left: 0;                           /* 图片左边缘与浏览器左边缘对齐 */
        }

        /* 功能框样式 */
        .function-box {
            position: fixed;
            width: calc(943 / 1920 * 100vw);
            height: calc(922 / 1080 * 100vh);
            top: calc(103 / 1080 * 100vh);
            left: calc(875 / 1920 * 100vw);
            border-radius: min(calc(32 / 1920 * 100vw), calc(32 / 1080 * 100vh));  /* 边框圆角半径 */
            color: #ffffff;
            box-shadow: 0 min(calc(2 / 1920 * 100vw), calc(2 / 1080 * 100vh)) min(calc(20 / 1920 * 100vw), calc(20 / 1080 * 100vh)) 0 rgba(19,67,112,0.15);        }
        /* 设置功能框内 标题框 及 字体 样式 */
        .h2-box h2 {
            position: fixed;
            /* 边框 */
            width: calc(214 / 1920 * 100vw);
            height: calc(35 / 1080 * 100vh);
            top: calc(133 / 1080 * 100vh);
            left: calc(1004 / 1920 * 100vw);

            /* 字体 */
            font: Inter;
            font-weight: 500;
            font-style: Medium;
            font-size: min(calc(36 / 1920 * 100vw), calc(36 / 1080 * 100vh));
            line-height: calc(35 / 1080 * 100vh);
            letter-spacing: 8%;
            color: #060326;
        }

        /* 设置文件框样式 */
        .file-box {
            position: fixed;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        /* 设置文件框内点击区域样式 */
        .file-selector {
            position: fixed;
            width: calc(685 / 1920 * 100vw);
            height: calc(420 / 1080 * 100vh);
            top: calc(250 / 1080 * 100vh);
            left: calc(1004 / 1920 * 100vw);
            border-radius: min(calc(15 / 1920 * 100vw), calc(15 / 1080 * 100vh));
            border: min(calc(1/1920*100vw), calc(1/1080*100vh)) dashed #0538BB;
            background-color: #f2faff;
        }
        /* 显示选中的文件信息 */
        .file-info {
            margin-top: min(calc(10 / 1920 * 100vw), calc(10 / 1080 * 100vh));
            color: #333;
        }
        /* 设置框内图标样式 */
        .file-box img {
            width: calc(58 / 1920 * 100vw);
            height: calc(39 / 1080 * 100vh);
            top: calc(381 / 1080 * 100vh);
            left: calc(1317 / 1920 * 100vw);
            color: #1849D6;
        }
        /* 设置文本域样式 */
        .file-box textarea {
            width: calc(499 / 1920 * 100vw);
            height: calc(90 / 1080 * 100vh) !important;
            top: calc(434 / 1080 * 100vh);
            left: calc(1097 / 1920 * 100vw);

            font: Inter;
            font-weight: 400;
            font-style: Regular;
            font-size: min(calc(16 / 1920 * 100vw), calc(16 / 1080 * 100vh));
            line-height: calc(32 / 1080 * 100vh);
            letter-spacing: 0%;
            text-align: center;
            vertical-align: Middle;
            color: #A5A5A5 !important;

            border: none;
            resize: none;                     /* 禁止调整文本区域大小 */
            background-color: transparent;    /* 背景透明 */
            white-space: pre-wrap;            /* 保留换行符，自动换行 */
        }
        /* 移除文本域聚焦时的边框 */
        .file-box textarea:focus {
            outline: none; /* 移除聚焦时的默认外边框 */
        }
        /* textarea滚动样式 */
        #fileInfo {
            /* 确保textarea有固定高度以启用滚动 */
            height: 150px;
            /* 启用垂直滚动 */
            overflow-y: auto;
            /* 禁用水平滚动 */
            overflow-x: hidden;
            /* 移除默认焦点边框 */
            outline: none;
            /* 可选：添加内边距增强可读性 */
            padding: 8px;
        }

        /* 设置按钮样式 */
        .button button.last-step {
            width: calc(272 / 1920 * 100vw);
            height: calc(67 / 1080 * 100vh);
            top: calc(739 / 1080 * 100vh);
            left: calc(1060 / 1920 * 100vw);
            border-radius: min(calc(8 / 1920 * 100vw), calc(8 / 1080 * 100vh));
            color: #ffffff;
            background-color: #75acff;

            border: none;
            cursor: pointer;              /* 鼠标指针样式 */
            transition: all 0.3s ease;    /* 添加过渡效果 */
        }
        .button button.last-step:hover {
            background-color: #5a93e6;               /* hover 状态背景色 */
        }
        .button button.last-step:active {
            background-color: #1b5aff;               /* active 状态背景色 */
            transform: translateY(2 / 1080 * 100vh);   /* 按下时向下移动 2px */
        }
        /* 禁用状态样式 */
        .button button.last-step:disabled {
            background-color: #75acff;
            cursor: not-allowed;
            transform: none;
        }
        .button button.last-step:disabled:hover {
            background-color: #5a93e6;
        }

        .button button.finish {
            width: calc(272 / 1920 * 100vw);
            height: calc(67 / 1080 * 100vh);
            top: calc(739 / 1080 * 100vh);
            left: calc(1361 / 1920 * 100vw);
            border: none;
            border-radius: min(calc(8 / 1920 * 100vw), calc(8 / 1080 * 100vh));
            color: #ffffff;
            background-color: #75acff;
        }
        .button button.finish:hover {
            background-color: #5a93e6;
        }
        .button button.finish:active {
            background-color: #1b5aff;
            transform: translateY(2 / 1080 * 100vh);
        }

        /* 设置进度条显示样式 */
        .load_bar {position: fixed;}
        .load_bar img.bar1, img.bar2 {left: calc(1175 / 1920 * 100vw); height: calc(4 / 1080 * 100vh); top: calc(910 / 1080 * 100vh)}
        .load_bar img.bar1 {width: calc(343 / 1920 * 100vw); color: #dde0e7}
        .load_bar img.bar2 {width: calc(299 / 1920 * 100vw); border-radius: min(calc(2 / 1920 * 100vw), calc(2 / 1080 * 100vh)); color: #85a7ff}
        .load_bar img.round11, img.round21, img.round31 {
            position: fixed;
            width: calc(32 / 1920 * 100vw * 4);
            height: calc(32 / 1080 * 100vh * 4);
            top: calc(853 / 1080 * 100vh);
            color: #2a4cfe;
        }
        .load_bar img.round12, img.round22, img.round32 {
            width: calc(26 / 1920 * 100vw * 0.8);
            height: calc(26 / 1080 * 100vh * 0.8);
            top: calc(901 / 1080 * 100vh);
            color: #85a7ff;
        }
        .load_bar img.round13, img.round23 {
            width: calc(10 / 1920 * 100vw);
            height: calc(7.06 / 1080 * 100vh);
            top: calc(909 / 1080 * 100vh);
            color: #2a4cfe;
        }
        .load_bar img.round11 {left: calc(1153 / 1920 * 100vw); box-shadow: 0 min(calc(7 / 1920 * 100vw), min(calc(64 / 1080 * 100vh))) 0 rgba(0, 0, 0, 0.07)}
        .load_bar img.round12 {left: calc(1206 / 1920 * 100vw)}
        .load_bar img.round13 {left: calc(1213 / 1920 * 100vw)}
        .load_bar img.round21 {left: calc(1281 / 1920 * 100vw); box-shadow: 0 min(calc(7 / 1920 * 100vw), calc(64 / 1080 * 100vh)) 0 rgba(0, 0, 0, 0.07)}
        .load_bar img.round22 {left: calc(1335 / 1920 * 100vw)}
        .load_bar img.round23 {left: calc(1341 / 1920 * 100vw)}
        .load_bar img.round31 {left: calc(1409 / 1920 * 100vw); box-shadow: 0 min(calc(7 / 1920 * 100vw), min(calc(64 / 1080 * 100vh))) 0 rgba(0, 0, 0, 0.07)}
        .load_bar img.round32 {left: calc(1462 / 1920 * 100vw)}
        .load_bar img.round33 {
            width: calc(8 / 1920 * 100vw);
            height: calc(13 / 1080 * 100vh);
            left: calc(1469 / 1920 * 100vw);
            top: calc(905 / 1080 * 100vh);

            font: Inter;
            font-weight: 500;
            font-style: Medium;
            font-size: min(calc(11 / 1920 * 100vw), calc(11 / 1080 * 100vh));
            line-height: calc(13 / 1080 * 100vh);
            letter-spacing: 0;
            text-transform: uppercase;
            color: #ffffff;
        }
    </style>
</head>
<body>
    <div class="background">
        <div class="h1-box">
            <h1 class="h1">Finish!<br>Upload Your Resume</h1>
        </div>
        <div class="text-box">
            <p>Upload your resume, the platform will help you parse and optimize, you<br>can also skip this step</p>
        </div>
        <div class="image">
            <img class="image" src="icons/picture1.png" alt="lift-Icon">
        </div>
        <div class="function-box">
            <div class="h2-box">
                <h2 class="h2">Upload file</h2>
            </div>
            <div class="file-box" onclick="document.getElementById('fileInput').click()">
                <div class="file-selector" id="customFileSelector">
                    <img class="icon" src="icons/Vector.png" alt="up-Icon">
                    <textarea class="textarea" id="fileInfo" placeholder="Drag your resume file to this area, or click on the area to select the appropriate file to upload" readonly></textarea>
                </div>
            </div>
            <div class="button">
                <button class="last-step" id="lastStepBtn" onclick="undoLastBatch()" disabled>Last step</button>
                <button class="finish" onclick="showFinishMessage()">Finish</button>
            </div>
            <div class="load_bar">
                <img class="bar1" src="icons/Bar.png" alt="down-Bar_down">
                <img class="bar2" src="icons/Bar - Active.png" alt="down-Bar_up">
                <img class="round11" src="icons/Oval.png" alt="down-Round11">
                <img class="round12" src="icons/Oval-2.png" alt="down-Round12">
                <img class="round13" src="icons/Check.png" alt="down-Round13">
                <img class="round21" src="icons/Oval.png" alt="down-Round21">
                <img class="round22" src="icons/Oval-2.png" alt="down-Round22">
                <img class="round23" src="icons/Check.png" alt="down-Round23">
                <img class="round31" src="icons/Oval.png" alt="down-Round31">
                <img class="round32" src="icons/Oval-2.png" alt="down-Round32">
                <img class="round33" src="icons/3.png" alt="down-Round33">
            </div>
        </div>
    </div>
    <script>
    // 用二维数组记录文件批次，每个元素是一次添加的文件数组
    let fileBatches = [];  // 存储文件批次
    let selectedFiles = [];  // 所有已选择的文件

    const fileSelector = document.getElementById('customFileSelector');
    const fileInfo = document.getElementById('fileInfo');
    const icon = document.querySelector('.file-selector .icon');
    const lastStepBtn = document.getElementById('lastStepBtn');

    // 初始化时检查按钮状态
    updateButtonState();

    // 点击触发文件选择
    fileSelector.addEventListener('click', () => {
      const fileInput = document.createElement('input');
      fileInput.type = 'file';
      fileInput.multiple = true;
      fileInput.accept = '.pdf, .png, .jpg, .jpeg, .gif, .bmp, .svg, .webp';

      fileInput.addEventListener('change', (e) => {
        addFileBatch(Array.from(e.target.files));  // 将文件转为数组作为一个批次
      });

      fileInput.click();
    });

    // 拖拽文件处理
    fileSelector.addEventListener('dragover', (e) => {
      e.preventDefault();
      fileSelector.style.background = '#e6f0ff';
    });

    fileSelector.addEventListener('dragleave', () => {
      fileSelector.style.background = '';
    });

    fileSelector.addEventListener('drop', (e) => {
      e.preventDefault();
      fileSelector.style.background = '';
      addFileBatch(Array.from(e.dataTransfer.files));  // 拖拽文件作为一个批次
    });

    // 处理文件批次添加
    function addFileBatch(newFiles) {
      if (newFiles.length === 0) return;

      // 过滤重复文件（与已有所有文件比较）
      const uniqueFiles = newFiles.filter(newFile => 
        !selectedFiles.some(existingFile => 
          existingFile.name === newFile.name && 
          existingFile.size === newFile.size && 
          existingFile.lastModified === newFile.lastModified
        )
      );

      if (uniqueFiles.length > 0) {
        fileBatches.push(uniqueFiles);  // 记录批次
        selectedFiles = [...selectedFiles, ...uniqueFiles];  // 更新总文件列表
        updateFileDisplay();
        updateButtonState();  // 更新按钮状态
      }
    }

    // 更新文件显示
    function updateFileDisplay() {
      if (selectedFiles.length === 0) {
        fileInfo.textContent = 'Drag your resume file to this area, or click on the area to select the appropriate file to upload';
        return;
      }

      let info = `已选择 ${selectedFiles.length} 个文件：\n`;
      selectedFiles.forEach((file, index) => {
        const size = file.size > 1024 * 1024 
          ? `${(file.size / (1024 * 1024)).toFixed(2)}MB` 
          : `${(file.size / 1024).toFixed(2)}KB`;
        info += `${index + 1}. ${file.name}（${size}）\n`;
      });
      fileInfo.textContent = info;
    }

    // 更新按钮状态
    function updateButtonState() {
        // 当有文件批次时启用按钮，否则禁用
        lastStepBtn.disabled = fileBatches.length === 0;
    }

    // 撤销上一次添加的整个批次
    function undoLastBatch() {
        if (fileBatches.length > 0) {
            // 移除最后一个批次
            const lastBatch = fileBatches.pop();
            // 从总文件列表中移除该批次的文件
            selectedFiles = selectedFiles.filter(file => 
              !lastBatch.some(batchFile => 
                file.name === batchFile.name && 
                file.size === batchFile.size && 
                file.lastModified === batchFile.lastModified
              )
            );
            updateFileDisplay();
            updateButtonState();  // 更新按钮状态
        }
    }

    function showFinishMessage() {
        // 检查是否有选中的文件
        if (selectedFiles.length === 0) {
            // 没有文件时显示提示
            alert("请添加文件");
        } else {
            // 有文件时显示提交成功
            alert("提交成功");
        }
    }
    </script>
</body>
</html>
